apiVersion: v1
kind: ConfigMap
metadata:
  name: scrolluniversity-config
  namespace: scrolluniversity
data:
  NODE_ENV: "production"
  PORT: "3000"
  HOST: "0.0.0.0"
  
  # Database Configuration
  DATABASE_POOL_MIN: "10"
  DATABASE_POOL_MAX: "50"
  DATABASE_IDLE_TIMEOUT: "30000"
  DATABASE_CONNECTION_TIMEOUT: "10000"
  DATABASE_SSL_ENABLED: "true"
  DB_POINT_IN_TIME_RECOVERY: "true"
  
  # Redis Configuration
  REDIS_TLS_ENABLED: "true"
  REDIS_CLUSTER_MODE: "true"
  REDIS_MAX_RETRIES: "5"
  
  # Security Configuration
  JWT_EXPIRES_IN: "7d"
  JWT_REFRESH_EXPIRES_IN: "30d"
  BCRYPT_ROUNDS: "14"
  HELMET_ENABLED: "true"
  TRUST_PROXY: "true"
  CORS_CREDENTIALS: "true"
  RATE_LIMIT_WINDOW: "15"
  RATE_LIMIT_MAX: "1000"
  
  # AI Configuration
  OPENAI_TIMEOUT: "120000"
  OPENAI_MAX_RETRIES: "5"
  OPENAI_MODEL_PRIMARY: "gpt-4-turbo-preview"
  OPENAI_MODEL_FALLBACK: "gpt-3.5-turbo"
  ANTHROPIC_TIMEOUT: "120000"
  ANTHROPIC_MAX_RETRIES: "5"
  ANTHROPIC_MODEL_PRIMARY: "claude-3-opus-20240229"
  ANTHROPIC_MODEL_FALLBACK: "claude-3-sonnet-20240229"
  
  # AI Rate Limits
  AI_RATE_LIMIT_RPM: "500"
  AI_RATE_LIMIT_TPM: "500000"
  AI_RATE_LIMIT_RPD: "100000"
  AI_RATE_LIMIT_CONCURRENT: "50"
  
  # AI Budget
  AI_DAILY_BUDGET: "300"
  AI_MONTHLY_BUDGET: "8000"
  AI_YEARLY_BUDGET: "96000"
  AI_BUDGET_ALERT_THRESHOLD: "0.8"
  AI_BUDGET_CRITICAL_THRESHOLD: "0.95"
  AI_BUDGET_AUTO_THROTTLE: "true"
  AI_BUDGET_EMERGENCY_FALLBACK: "true"
  
  # AI Cache
  AI_CACHE_ENABLED: "true"
  AI_CACHE_TTL: "7200"
  AI_SEMANTIC_CACHE_ENABLED: "true"
  AI_SEMANTIC_CACHE_THRESHOLD: "0.95"
  AI_CACHE_COMPRESSION: "true"
  AI_CACHE_MAX_SIZE: "10000"
  
  # AI Retry
  AI_RETRY_MAX_ATTEMPTS: "5"
  AI_RETRY_INITIAL_DELAY: "2000"
  AI_RETRY_MAX_DELAY: "30000"
  AI_RETRY_BACKOFF_MULTIPLIER: "2"
  
  # AI Fallback
  AI_FALLBACK_ENABLED: "true"
  AI_CIRCUIT_BREAKER_ENABLED: "true"
  AI_CIRCUIT_BREAKER_THRESHOLD: "10"
  AI_CIRCUIT_BREAKER_TIMEOUT: "60000"
  
  # Monitoring
  SENTRY_ENVIRONMENT: "production"
  SENTRY_TRACES_SAMPLE_RATE: "0.1"
  SENTRY_PROFILES_SAMPLE_RATE: "0.1"
  LOG_LEVEL: "warn"
  LOG_FORMAT: "json"
  LOG_ROTATION: "daily"
  LOG_MAX_FILES: "30"
  LOG_MAX_SIZE: "100m"
  ENABLE_METRICS: "true"
  METRICS_PORT: "9090"
  PROMETHEUS_ENABLED: "true"
  APM_ENABLED: "true"
  NEW_RELIC_APP_NAME: "ScrollUniversity-Production"
  
  # Backup
  BACKUP_ENABLED: "true"
  BACKUP_SCHEDULE: "0 2 * * *"
  BACKUP_RETENTION_DAYS: "90"
  BACKUP_ENCRYPTION: "true"
  DB_BACKUP_ENABLED: "true"
  DB_BACKUP_SCHEDULE: "0 */6 * * *"
  REDIS_BACKUP_ENABLED: "true"
  REDIS_BACKUP_SCHEDULE: "0 4 * * *"
  
  # Performance
  CLUSTER_ENABLED: "true"
  CLUSTER_WORKERS: "auto"
  COMPRESSION_ENABLED: "true"
  COMPRESSION_LEVEL: "6"
  CDN_ENABLED: "true"
  
  # Compliance
  GDPR_ENABLED: "true"
  FERPA_ENABLED: "true"
  COPPA_ENABLED: "true"
  DATA_RETENTION_DAYS: "2555"
  AUDIT_LOG_RETENTION_DAYS: "2555"
