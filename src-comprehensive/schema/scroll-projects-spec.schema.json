{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://scrolluniversity.org/schemas/scroll-projects-spec.json",
  "title": "ScrollProjectsSpec Schema",
  "description": "JSON Schema for ScrollUniversity project management system",
  "type": "object",
  "required": ["project_id", "student_id", "title", "scroll_field", "status", "milestones"],
  "properties": {
    "project_id": {
      "type": "string",
      "format": "uuid",
      "description": "Unique identifier for the project"
    },
    "student_id": {
      "type": "string",
      "format": "uuid",
      "description": "Unique identifier for the student"
    },
    "title": {
      "type": "string",
      "minLength": 5,
      "maxLength": 200,
      "description": "Project title"
    },
    "description": {
      "type": "string",
      "minLength": 50,
      "maxLength": 5000,
      "description": "Detailed project description in markdown format"
    },
    "scroll_field": {
      "type": "string",
      "enum": [
        "ScrollMedicine",
        "ScrollAI", 
        "ScrollGovernance",
        "ScrollEconomy",
        "ScrollTheology",
        "ScrollLaw",
        "ScrollEngineering",
        "ScrollArts",
        "ScrollHealth",
        "ScrollEducation"
      ],
      "description": "The scroll field this project belongs to"
    },
    "mentor_id": {
      "type": "string",
      "format": "uuid",
      "description": "Unique identifier for the assigned mentor"
    },
    "status": {
      "type": "string",
      "enum": ["proposal", "in_progress", "review", "submitted", "listed", "archived"],
      "description": "Current status of the project"
    },
    "milestones": {
      "type": "array",
      "minItems": 4,
      "maxItems": 10,
      "items": {
        "$ref": "#/definitions/MilestoneSpec"
      },
      "description": "Array of project milestones"
    },
    "gpt_summary": {
      "type": "string",
      "maxLength": 2000,
      "description": "AI-generated summary of the project"
    },
    "scrollcoin_earned": {
      "type": "number",
      "minimum": 0,
      "maximum": 1000000,
      "description": "Total ScrollCoin earned from this project"
    },
    "published": {
      "type": "boolean",
      "description": "Whether the project is published to marketplace"
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "description": "Project creation timestamp"
    },
    "updated_at": {
      "type": "string",
      "format": "date-time",
      "description": "Last update timestamp"
    },
    "integrity_seal": {
      "$ref": "#/definitions/IntegritySeal"
    },
    "metadata": {
      "$ref": "#/definitions/ProjectMetadata"
    }
  },
  "definitions": {
    "MilestoneSpec": {
      "type": "object",
      "required": ["milestone_id", "project_id", "stage", "title", "completed"],
      "properties": {
        "milestone_id": {
          "type": "string",
          "format": "uuid"
        },
        "project_id": {
          "type": "string",
          "format": "uuid"
        },
        "stage": {
          "type": "string",
          "enum": ["Proposal", "Prototype", "Testing", "Final"]
        },
        "title": {
          "type": "string",
          "minLength": 3,
          "maxLength": 100
        },
        "description": {
          "type": "string",
          "minLength": 10,
          "maxLength": 1000
        },
        "completed": {
          "type": "boolean"
        },
        "submitted_at": {
          "type": "string",
          "format": "date-time"
        },
        "approved_at": {
          "type": "string",
          "format": "date-time"
        },
        "feedback": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/MentorFeedback"
          }
        },
        "required_deliverables": {
          "type": "array",
          "items": {
            "type": "string",
            "minLength": 3,
            "maxLength": 200
          },
          "minItems": 1,
          "maxItems": 20
        },
        "validation_criteria": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ValidationCriteria"
          }
        },
        "completion_percentage": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        }
      }
    },
    "MentorFeedback": {
      "type": "object",
      "required": ["feedback_id", "mentor_id", "mentor_type", "feedback_type", "content", "provided_at"],
      "properties": {
        "feedback_id": {
          "type": "string",
          "format": "uuid"
        },
        "mentor_id": {
          "type": "string",
          "format": "uuid"
        },
        "mentor_type": {
          "type": "string",
          "enum": ["human", "ai"]
        },
        "feedback_type": {
          "type": "string",
          "enum": ["approval", "revision_required", "rejection", "guidance"]
        },
        "content": {
          "type": "string",
          "minLength": 10,
          "maxLength": 2000
        },
        "provided_at": {
          "type": "string",
          "format": "date-time"
        },
        "milestone_id": {
          "type": "string",
          "format": "uuid"
        },
        "actionable_items": {
          "type": "array",
          "items": {
            "type": "string",
            "minLength": 5,
            "maxLength": 500
          }
        },
        "approval_status": {
          "type": "boolean"
        }
      }
    },
    "ValidationCriteria": {
      "type": "object",
      "required": ["criteria_id", "name", "description", "required", "validation_method", "scroll_alignment_weight", "met"],
      "properties": {
        "criteria_id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 3,
          "maxLength": 100
        },
        "description": {
          "type": "string",
          "minLength": 10,
          "maxLength": 500
        },
        "required": {
          "type": "boolean"
        },
        "validation_method": {
          "type": "string",
          "enum": ["manual", "automated", "hybrid"]
        },
        "scroll_alignment_weight": {
          "type": "number",
          "minimum": 0,
          "maximum": 10
        },
        "met": {
          "type": "boolean"
        },
        "evidence": {
          "type": "string",
          "maxLength": 1000
        }
      }
    },
    "IntegritySeal": {
      "type": "object",
      "required": ["seal_id", "applied_by", "applied_at", "seal_type", "verification_hash"],
      "properties": {
        "seal_id": {
          "type": "string",
          "format": "uuid"
        },
        "applied_by": {
          "type": "string",
          "format": "uuid"
        },
        "applied_at": {
          "type": "string",
          "format": "date-time"
        },
        "seal_type": {
          "type": "string",
          "enum": ["scroll_oath", "drift_verified", "mentor_approved"]
        },
        "verification_hash": {
          "type": "string",
          "pattern": "^[a-fA-F0-9]{64}$"
        },
        "expiry_date": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "ProjectMetadata": {
      "type": "object",
      "properties": {
        "tags": {
          "type": "array",
          "items": {
            "type": "string",
            "minLength": 2,
            "maxLength": 50
          },
          "maxItems": 20
        },
        "difficulty_level": {
          "type": "string",
          "enum": ["beginner", "intermediate", "advanced"]
        },
        "estimated_duration_weeks": {
          "type": "number",
          "minimum": 1,
          "maximum": 52
        },
        "real_world_impact_score": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        },
        "collaboration_allowed": {
          "type": "boolean"
        },
        "public_visibility": {
          "type": "boolean"
        },
        "marketplace_category": {
          "type": "string",
          "enum": ["healthcare", "education", "governance", "finance", "technology", "arts", "social_impact"]
        }
      }
    },
    "CreateProjectRequest": {
      "type": "object",
      "required": ["title", "description", "scroll_field"],
      "properties": {
        "title": {
          "type": "string",
          "minLength": 5,
          "maxLength": 200
        },
        "description": {
          "type": "string",
          "minLength": 50,
          "maxLength": 5000
        },
        "scroll_field": {
          "type": "string",
          "enum": [
            "ScrollMedicine",
            "ScrollAI", 
            "ScrollGovernance",
            "ScrollEconomy",
            "ScrollTheology",
            "ScrollLaw",
            "ScrollEngineering",
            "ScrollArts",
            "ScrollHealth",
            "ScrollEducation"
          ]
        },
        "estimated_duration_weeks": {
          "type": "number",
          "minimum": 1,
          "maximum": 52
        },
        "collaboration_allowed": {
          "type": "boolean",
          "default": false
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string",
            "minLength": 2,
            "maxLength": 50
          },
          "maxItems": 10
        }
      }
    },
    "MilestoneSubmission": {
      "type": "object",
      "required": ["milestone_id", "deliverables", "submission_notes", "self_assessment"],
      "properties": {
        "milestone_id": {
          "type": "string",
          "format": "uuid"
        },
        "deliverables": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ProjectDeliverable"
          },
          "minItems": 1,
          "maxItems": 20
        },
        "submission_notes": {
          "type": "string",
          "minLength": 20,
          "maxLength": 2000
        },
        "evidence_links": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uri"
          },
          "maxItems": 10
        },
        "self_assessment": {
          "$ref": "#/definitions/SelfAssessment"
        }
      }
    },
    "ProjectDeliverable": {
      "type": "object",
      "required": ["deliverable_id", "name", "type", "url", "description"],
      "properties": {
        "deliverable_id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 3,
          "maxLength": 200
        },
        "type": {
          "type": "string",
          "enum": ["document", "code", "demo", "presentation", "data", "other"]
        },
        "url": {
          "type": "string",
          "format": "uri"
        },
        "description": {
          "type": "string",
          "minLength": 10,
          "maxLength": 1000
        },
        "file_size": {
          "type": "number",
          "minimum": 0
        },
        "mime_type": {
          "type": "string",
          "pattern": "^[a-zA-Z0-9][a-zA-Z0-9!#$&\\-\\^_]*\\/[a-zA-Z0-9][a-zA-Z0-9!#$&\\-\\^_.]*$"
        }
      }
    },
    "SelfAssessment": {
      "type": "object",
      "required": ["completion_percentage", "challenges_faced", "lessons_learned", "scroll_alignment_confidence"],
      "properties": {
        "completion_percentage": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        },
        "challenges_faced": {
          "type": "array",
          "items": {
            "type": "string",
            "minLength": 10,
            "maxLength": 500
          },
          "maxItems": 10
        },
        "lessons_learned": {
          "type": "array",
          "items": {
            "type": "string",
            "minLength": 10,
            "maxLength": 500
          },
          "maxItems": 10
        },
        "next_steps": {
          "type": "array",
          "items": {
            "type": "string",
            "minLength": 5,
            "maxLength": 300
          },
          "maxItems": 10
        },
        "scroll_alignment_confidence": {
          "type": "number",
          "minimum": 1,
          "maximum": 10
        }
      }
    },
    "ValidationResult": {
      "type": "object",
      "required": ["valid", "errors", "warnings", "scroll_alignment_score"],
      "properties": {
        "valid": {
          "type": "boolean"
        },
        "errors": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ValidationError"
          }
        },
        "warnings": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ValidationWarning"
          }
        },
        "scroll_alignment_score": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        }
      }
    },
    "ValidationError": {
      "type": "object",
      "required": ["field", "message", "error_code", "severity"],
      "properties": {
        "field": {
          "type": "string",
          "minLength": 1,
          "maxLength": 100
        },
        "message": {
          "type": "string",
          "minLength": 5,
          "maxLength": 500
        },
        "error_code": {
          "type": "string",
          "pattern": "^[A-Z_]+$"
        },
        "severity": {
          "type": "string",
          "enum": ["critical", "major", "minor"]
        }
      }
    },
    "ValidationWarning": {
      "type": "object",
      "required": ["field", "message", "suggestion"],
      "properties": {
        "field": {
          "type": "string",
          "minLength": 1,
          "maxLength": 100
        },
        "message": {
          "type": "string",
          "minLength": 5,
          "maxLength": 500
        },
        "suggestion": {
          "type": "string",
          "minLength": 5,
          "maxLength": 500
        }
      }
    },
    "HookConfiguration": {
      "type": "object",
      "required": ["hook_name", "trigger_events", "target_services", "execution_order", "enabled"],
      "properties": {
        "hook_name": {
          "type": "string",
          "pattern": "^[a-zA-Z][a-zA-Z0-9_]*$"
        },
        "trigger_events": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "onProjectCreate",
              "onMilestoneSubmit", 
              "onProjectSubmit",
              "onMarketplaceListing",
              "onScrollDegreeReview",
              "onStatusChange",
              "onMentorAssignment"
            ]
          },
          "minItems": 1
        },
        "target_services": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "minItems": 1
        },
        "execution_order": {
          "type": "number",
          "minimum": 1,
          "maximum": 100
        },
        "retry_policy": {
          "$ref": "#/definitions/RetryPolicy"
        },
        "error_handling": {
          "$ref": "#/definitions/ErrorHandlingStrategy"
        },
        "enabled": {
          "type": "boolean"
        }
      }
    },
    "RetryPolicy": {
      "type": "object",
      "required": ["max_attempts", "initial_delay_ms", "backoff_multiplier", "max_delay_ms"],
      "properties": {
        "max_attempts": {
          "type": "number",
          "minimum": 1,
          "maximum": 10
        },
        "initial_delay_ms": {
          "type": "number",
          "minimum": 100,
          "maximum": 60000
        },
        "backoff_multiplier": {
          "type": "number",
          "minimum": 1,
          "maximum": 5
        },
        "max_delay_ms": {
          "type": "number",
          "minimum": 1000,
          "maximum": 300000
        }
      }
    },
    "ErrorHandlingStrategy": {
      "type": "object",
      "required": ["strategy", "notification_required", "escalation_threshold"],
      "properties": {
        "strategy": {
          "type": "string",
          "enum": ["fail_fast", "retry", "fallback", "ignore"]
        },
        "fallback_action": {
          "type": "string",
          "maxLength": 200
        },
        "notification_required": {
          "type": "boolean"
        },
        "escalation_threshold": {
          "type": "number",
          "minimum": 1,
          "maximum": 10
        }
      }
    }
  },
  "additionalProperties": false
}